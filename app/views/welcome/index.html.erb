<!--
<%= form_with url: welcome_trigger_job_path do |f| %>
 <%= f.submit 'Launch job' %>
<% end %>
 -->

<h1>Apps List</h1>
<div class="row card_space">
  <div class="col-sm-6">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Workshop App</h5>
        <p class="card-text">Sample booking app.</p>
        <%= link_to "WorkShop", workshop_index_path, class: "btn btn-primary" %>
      </div>
    </div>
  </div>
  <div class="col-sm-6">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Sidekiq app</h5>
        <p class="card-text">Sample code to trigger sidekiq job(start all servers).</p>
        <%= form_with url: welcome_trigger_job_path do |f| %>
          <%= f.submit 'Launch job', class: "btn btn-primary" %>
        <% end %>
      </div>
    </div>
  </div>
</div>

<div class="row card_space">
  <div class="col-sm-6">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">FunAPI App</h5>
        <p class="card-text">Sample FunAPI app.</p>
        <%= link_to "FunApi Users", users_path, class: "btn btn-primary" %>
      </div>
    </div>
  </div>
  <div class="col-sm-6">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Articles app</h5>
        <p class="card-text">Sample Articles app.</p>
        <%= link_to "Articles", articles_path, class: "btn btn-primary" %>
      </div>
    </div>
  </div>
</div>

<div class="row card_space">
  <div class="col-sm-6">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Scraper App</h5>
        <p class="card-text">Sample Scraper app.</p>
        <%= link_to "Scraper", scraper_index_path, class: "btn btn-primary" %>
      </div>
    </div>
  </div>
  <div class="col-sm-6">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Student app</h5>
        <p class="card-text">Sample app to show nested forms.</p>
        <%= link_to "Students", students_path, class: "btn btn-primary" %>
      </div>
    </div>
  </div>
</div>

<div class="row card_space">
  <div class="col-sm-6">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Chatbot App</h5>
        <p class="card-text">Sample Chat app.</p>
        <%= link_to "CgPt", ai_index_path, class: "btn btn-primary" %>
      </div>
    </div>
  </div>
  <div class="col-sm-6">
    <div class="card">
      <div class="card-body">
        <div id="flash-messages"></div>
        <button id="open-article-dialog" class="btn btn-success mb-3">New Article</button>
        <dialog id="article-dialog">
          <form method="post" action="<%= articles_path %>" data-remote="true" id="new-article-form">
            <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
            <h3>Create New Article</h3>
            <div class="mb-3">
              <label for="article_title">Title</label>
              <input type="text" name="article[name]" id="article_name" class="form-control" required>
            </div>
            <div class="mb-3">
              <label for="article_body">Body</label>
              <textarea name="article[comment]" id="article_comment" class="form-control" required></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Create Article</button>
            <button type="button" id="close-article-dialog" class="btn btn-secondary">Cancel</button>
          </form>
        </dialog>
        
        <script>
          const dialog = document.getElementById('article-dialog');
          document.getElementById('open-article-dialog').onclick = () => dialog.showModal();
          document.getElementById('close-article-dialog').onclick = () => dialog.close();
        </script>
      </div>
    </div>
  </div>
</div>
